{"version":3,"sources":["webpack:///./src/views/adminViews/Order.vue","webpack:///./src/components/adminComponents/OrderModal.vue","webpack:///./src/components/adminComponents/OrderModal.vue?9fe8","webpack:///./src/views/adminViews/Order.vue?bd90"],"names":["class","_createElementVNode","width","_createVNode","_component_Header","type","onClick","$options","_hoisted_6","_createElementBlock","_Fragment","_renderList","$data","item","index","key","_toDisplayString","_ctx","getDate","create_at","id","user","name","is_paid","_hoisted_7","paid_date","_hoisted_8","message","data-bs-toggle","data-bs-target","_hoisted_10","_hoisted_11","_component_OrderModal","ref","data","onUpdata","_component_Loading","isShow","_component_DelModal","pdt","isAll","onDelProduct","onDelAll","tabindex","role","data-bs-dismiss","aria-label","for","colspan","onSubmit","$props","_hoisted_5","_component_font_awesome_icon","icon","$event","email","tel","address","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_31","product","title","origin_price","price","qty","onChange","total","_hoisted_33","final_total","href","_hoisted_35","code","percent","_hoisted_39","_hoisted_41","_hoisted_43","_hoisted_45","_hoisted_46","order","coupon","products","origin_total","fare","finalTotal","discount","mixins","modal","props","Object","defalut","watch","this","values","forEach","i","count","methods","updataItem","deleteItem","splice","$emit","console","log","__exports__","orderList","isLoading","orderDetail","components","Header","OrderModal","Loading","DelModal","inject","openDetail","JSON","parse","stringify","$refs","detail","showModal","openDelModal","delModal","delProduct","deleteAll","api","$http","delete","then","res","success","hideModal","getOrder","emitter","emit","style","content","catch","err","error","get","orders","updataOrder","put","mounted","render"],"mappings":"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","file":"js/chunk-2d216802.35ea0626.js","sourcesContent":["<template>\n  <Header></Header>\n  <div class=\"container\">\n    <div class=\"adminInner\">\n      <div class=\"btnBox\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary mr-2 border-start-0\"\n          @click=\"openDelModal(true)\"\n        >\n          刪除所有訂單\n        </button>\n      </div>\n      <div class=\"pdtList\">\n        <table class=\"mt-4\">\n          <thead>\n            <tr>\n              <th width=\"120\">訂單日期</th>\n              <th width=\"360\">訂單編號</th>\n              <th width=\"120\">訂購人</th>\n              <th width=\"120\">付款日期</th>\n              <th>備註</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) in orderList\" :key=\"index\">\n              <td>{{ $filter.getDate(item.create_at * 1000) }}</td>\n              <td>\n                {{ item.id }}\n              </td>\n              <td>{{ item.user.name }}</td>\n              <td v-if=\"item.is_paid\">\n                {{ item.paid_date }}\n              </td>\n              <td v-else>\n                尚未付款\n              </td>\n              <td>\n                {{ item.message }}\n              </td>\n              <td>\n                <div class=\"btn-group\">\n                  <button\n                    class=\"btn btn-outline-primary btn-sm\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#Modal\"\n                    @click.prevent=\"openDetail(item)\"\n                  >\n                    編輯\n                  </button>\n                  <button\n                    class=\"btn btn-outline-danger btn-sm\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#delModal\"\n                    @click=\"openDelModal(false, item)\"\n                  >\n                    刪除\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <!-- <Pagination></Pagination> -->\n      <OrderModal\n        ref=\"detail\"\n        :data=\"orderDetail\"\n        @updata=\"updataOrder\"\n      ></OrderModal>\n      <Loading :isShow=\"isLoading\"></Loading>\n      <DelModal\n        ref=\"delModal\"\n        :pdt=\"orderDetail\"\n        :isAll = \"isAll\"\n        @del-product=\"delProduct\"\n        @delAll=\"deleteAll\"\n      ></DelModal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from '@/components/adminComponents/Header.vue';\n// import Pagination from '@/components/Pagination.vue';\nimport OrderModal from '@/components/adminComponents/OrderModal.vue';\nimport Loading from '@/components/Loading.vue';\nimport DelModal from '@/components/adminComponents/DelModal.vue';\n\nexport default {\n  data() {\n    return {\n      orderList: [],\n      isLoading: false,\n      orderDetail: {},\n      isAll: false,\n    };\n  },\n  components: {\n    Header,\n    // Pagination,\n    OrderModal,\n    Loading,\n    DelModal,\n  },\n  inject: ['emitter'],\n  methods: {\n    openDetail(item) {\n      this.orderDetail = JSON.parse(JSON.stringify(item));\n      console.log(this.orderDetail);\n      this.$refs.detail.showModal();\n    },\n    openDelModal(isAll, item) {\n      this.isAll = isAll;\n      console.log(isAll);\n      if (!isAll) {\n        this.orderDetail = item;\n      }\n      this.$refs.delModal.showModal();\n    },\n    delProduct(item) {\n      if (item === 'allOrder') {\n        this.deleteAll();\n      } else {\n        this.isLoading = true;\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`;\n        this.$http\n          .delete(api)\n          .then((res) => {\n            if (res.data.success) {\n              this.$refs.delModal.hideModal();\n              this.getOrder();\n              this.isLoading = false;\n              this.emitter.emit('pushMessage', {\n                style: 'success',\n                content: res.data.message,\n                icon: '',\n              });\n            } else {\n              this.emitter.emit('pushMessage', {\n                style: 'fail',\n                content: res.data.message,\n                icon: '',\n              });\n              this.$refs.delModal.hideModal();\n              this.isLoading = false;\n            }\n            console.log(res);\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      }\n    },\n    getOrder() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.orderList = res.data.orders;\n            console.log(res.data);\n            this.isLoading = false;\n          } else {\n            console.log('列表取得失敗');\n            this.isLoading = false;\n          }\n          console.log(res);\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n    updataOrder(item) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`;\n      this.$http\n        .put(api, { data: item })\n        .then((res) => {\n          console.log(res);\n          if (res.data.success) {\n            this.emitter.emit('pushMessage', {\n              style: 'success',\n              content: res.data.message,\n              icon: '',\n            });\n            this.$refs.detail.hideModal();\n            this.getOrder();\n            this.isLoading = false;\n          } else {\n            this.emitter.emit('pushMessage', {\n              style: 'fail',\n              content: res.data.message,\n              icon: '',\n            });\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n    deleteAll() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders/all`;\n      this.$http\n        .delete(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.$refs.delModal.hideModal();\n            this.getOrder();\n            this.isLoading = false;\n            this.emitter.emit('pushMessage', {\n              style: 'success',\n              content: res.data.message,\n              icon: '',\n            });\n          } else {\n            this.emitter.emit('pushMessage', {\n              style: 'fail',\n              content: res.data.message,\n              icon: '',\n            });\n            this.$refs.delModal.hideModal();\n            this.isLoading = false;\n          }\n          console.log(res);\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n  },\n  mounted() {\n    this.getOrder();\n  },\n};\n</script>\n","<template>\n  <!-- Modal -->\n  <div class=\"modal fade orderModal\" tabindex=\"-1\" ref=\"modal\">\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <form class=\"modal-content border-0\" @submit=\"onSubmit\">\n        <div class=\"modal-header\">\n          <p class=\"modalTitle\">\n            <span>訂單編號: {{ data.id }}</span>\n          </p>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\" v-if=\"data.user\">\n          <div class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"mb-3\">\n                <label for=\"name\" class=\"form-label inputTitle\">\n                  <font-awesome-icon icon=\"fa-solid fa-stroopwafel\" />\n                  訂購人姓名\n                </label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"name\"\n                  v-model=\"order.user.name\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"email\" class=\"form-label inputTitle\">\n                  <font-awesome-icon icon=\"fa-solid fa-stroopwafel\" />\n                  聯絡電子信箱\n                </label>\n                <input\n                  type=\"email\"\n                  class=\"form-control\"\n                  id=\"email\"\n                  v-model=\"order.user.email\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"tel\" class=\"form-label inputTitle\">\n                  <font-awesome-icon icon=\"fa-solid fa-stroopwafel\" />\n                  聯絡電話\n                </label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"tel\"\n                  v-model=\"order.user.tel\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"add\" class=\"form-label inputTitle\">\n                  <font-awesome-icon icon=\"fa-solid fa-stroopwafel\" />\n                  收件地址\n                </label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"add\"\n                  v-model=\"order.user.address\"\n                />\n              </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"orderDetailList mb-1\">\n                <table class=\"w-100\">\n                  <thead>\n                    <tr class=\"orderTitle\">\n                      <td>名稱</td>\n                      <td width=\"80\">原價</td>\n                      <td width=\"80\">售價</td>\n                      <td width=\"60\">數量</td>\n                      <td width=\"80\">小計</td>\n                      <td width=\"80\" v-if=\"coupon\">折扣後</td>\n                      <td width=\"80\">刪除</td>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"(item, index) in products\" :key=\"index\">\n                      <td>{{ item.product.title }}</td>\n                      <td>{{ item.product.origin_price }}</td>\n                      <td>{{ item.product.price }}</td>\n                      <td>\n                        <input\n                          type=\"number\"\n                          v-model=\"item.qty\"\n                          @change=\"updataItem(item)\"\n                        />\n                      </td>\n                      <td>\n                        {{ item.total }}\n                      </td>\n                      <td v-if=\"coupon\">\n                        {{ item.final_total }}\n                      </td>\n                      <td>\n                        <a\n                          href=\"#\"\n                          title=\"刪除\"\n                          class=\"d-block\"\n                          @click.prevent=\"deleteItem(item)\"\n                        >\n                          <font-awesome-icon icon=\"fa-solid fa-trash-can\" />\n                        </a>\n                      </td>\n                    </tr>\n                    <tr v-if=\"coupon\">\n                      <td colspan=\"7\" class=\"text-left\">\n                        <font-awesome-icon icon=\"fa-solid fa-circle-check\" />\n                        已套用{{ coupon.title }}優惠券\"{{\n                          coupon.code\n                        }}\"；折扣{{ 100 - coupon.percent }}%\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div class=\"orderTotal\">\n                <div class=\"orderItem\">\n                  <p class=\"title\">總價</p>\n                  <p>$ {{ origin_total }}</p>\n                </div>\n                <div class=\"orderItem red\" v-if=\"coupon\">\n                  <p class=\"title\">折扣</p>\n                  <p>– $ {{ discount }}</p>\n                </div>\n                <div class=\"orderItem\">\n                  <p class=\"title\">運費</p>\n                  <p>$ {{ fare }}</p>\n                </div>\n                <div class=\"orderItem\">\n                  <p class=\"title\">結算</p>\n                  <p>$ {{ finalTotal }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-primary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button class=\"btn btn-primary\">\n            確定\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modal from '@/mixins/bsmodal';\n\nexport default {\n  data() {\n    return {\n      order: {},\n      coupon: {},\n      products: [],\n      origin_total: 0,\n      fare: 0,\n      finalTotal: 0,\n      discount: 0,\n    };\n  },\n  mixins: [modal],\n  props: {\n    data: {\n      type: Object,\n      defalut() {\n        return {};\n      },\n    },\n  },\n  watch: {\n    data() {\n      this.origin_total = 0;\n      this.order = this.data;\n      this.products = Object.values(this.data.products);\n      Object.values(this.order.products).forEach((i) => {\n        this.coupon = i.coupon;\n      });\n      this.count();\n    },\n  },\n  methods: {\n    updataItem(item) {\n      this.products.forEach((i, index) => {\n        if (i.id === item.id) {\n          this.products[index].total = item.qty * item.product.price;\n          if (this.coupon) {\n            this.products[index].final_total = this.products[index].total\n            * (item.coupon.percent / 100);\n          }\n        }\n      });\n      this.count();\n    },\n    deleteItem(item) {\n      this.products.forEach((i, index) => {\n        if (i.id === item.id) {\n          this.products.splice(index, 1);\n          this.order.products = this.products;\n        }\n      });\n      this.count();\n    },\n    count() {\n      this.origin_total = 0;\n      this.finalTotal = 0;\n      this.products.forEach((i) => {\n        this.origin_total += i.total;\n      });\n      this.fare = this.origin_total > 3000 ? 0 : 150;\n      if (!this.coupon) {\n        this.finalTotal = this.origin_total + this.fare;\n      } else {\n        this.products.forEach((i) => {\n          this.finalTotal += i.final_total;\n        });\n        this.finalTotal += this.fare;\n        this.discount = this.origin_total + this.fare - this.finalTotal;\n      }\n    },\n    onSubmit() {\n      this.$emit('updata', this.order);\n      console.log(this.order);\n      console.log(this.products);\n    },\n  },\n};\n</script>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=11146822\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\homework\\\\sweet\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Order.vue?vue&type=template&id=1622f388\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\homework\\\\sweet\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}