(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21d30107"],{1799:function(e,t,c){"use strict";var l=c("7a23");const a={"aria-label":"Page navigation",class:"pagination justify-content-center"},o={class:"pagination justify-content-center"},s={key:0,class:"page-item"},n=["onClick"],r={key:1,class:"page-item"};function i(e,t,c,i,d,m){const b=Object(l["resolveComponent"])("font-awesome-icon");return Object(l["openBlock"])(),Object(l["createElementBlock"])("nav",a,[Object(l["createElementVNode"])("ul",o,[1==c.page.has_pre?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",s,[Object(l["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[0]||(t[0]=Object(l["withModifiers"])(t=>e.$emit("changePage",c.page.current_page-1),["prevent"]))},[Object(l["createVNode"])(b,{icon:"fa-solid fa-angle-left"})])])):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(c.page.total_pages,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{class:"page-item",key:t},[Object(l["createElementVNode"])("a",{class:Object(l["normalizeClass"])(["page-link",{active:t==c.page.current_page}]),href:"#",onClick:Object(l["withModifiers"])(c=>e.$emit("changePage",t),["prevent"])},Object(l["toDisplayString"])(t),11,n)]))),128)),1==c.page.has_next?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",r,[Object(l["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=Object(l["withModifiers"])(t=>e.$emit("changePage",c.page.current_page+1),["prevent"]))},[Object(l["createVNode"])(b,{icon:"fa-solid fa-angle-right"})])])):Object(l["createCommentVNode"])("",!0)])])}var d={props:["page"]},m=c("6b0d"),b=c.n(m);const p=b()(d,[["render",i]]);t["a"]=p},"29ce":function(e,t,c){"use strict";c.r(t);var l=c("7a23");const a={class:"container"},o={class:"adminInner"},s={class:"pdtSearchBox"},n={class:"btnBox"},r=Object(l["createElementVNode"])("input",{type:"text",placeholder:"請輸入產品名稱"},null,-1),i={type:"button",class:"btn btn-primary mr-2 border-start-0"},d={class:"btnBox"},m={class:"pdtList"},b={class:"mt-4"},p=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{width:"120"},"分類"),Object(l["createElementVNode"])("th",{width:"120"},"照片"),Object(l["createElementVNode"])("th",null,"名稱"),Object(l["createElementVNode"])("th",{width:"120"},"原價"),Object(l["createElementVNode"])("th",{width:"120"},"售價"),Object(l["createElementVNode"])("th",{width:"100"},"狀態"),Object(l["createElementVNode"])("th",{width:"200"})])],-1),u=["src"],j={class:"title"},O={class:"text-success"},g={class:"btn-group"},h=["onClick"],V=["onClick"];function N(e,t,c,N,E,f){const v=Object(l["resolveComponent"])("Header"),k=Object(l["resolveComponent"])("font-awesome-icon"),y=Object(l["resolveComponent"])("Loading"),C=Object(l["resolveComponent"])("Pagination"),x=Object(l["resolveComponent"])("Modal"),w=Object(l["resolveComponent"])("DelModal");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(v),Object(l["createElementVNode"])("div",a,[Object(l["createElementVNode"])("div",o,[Object(l["createElementVNode"])("div",s,[Object(l["createElementVNode"])("div",n,[r,Object(l["createElementVNode"])("button",i,[Object(l["createVNode"])(k,{icon:"fa-solid fa-magnifying-glass"})])])]),Object(l["createElementVNode"])("div",d,[Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-primary mr-2 border-start-0",onClick:t[0]||(t[0]=e=>f.openModal(!0))}," 新增甜品 ")]),Object(l["createElementVNode"])("div",m,[Object(l["createElementVNode"])("table",b,[p,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(E.productList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.category),1),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("img",{src:e.imageUrl,alt:"",class:"img-fluid"},null,8,u)]),Object(l["createElementVNode"])("td",j,Object(l["toDisplayString"])(e.title)+Object(l["toDisplayString"])(e.id),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.origin_price),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.price),1),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("span",O,Object(l["toDisplayString"])(1==e.is_enabled?"上架中":"未上架"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",g,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>f.openModal(!1,e)}," 編輯 ",8,h),Object(l["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>f.openDelModal(e)}," 刪除 ",8,V)])])]))),128))])])]),Object(l["createVNode"])(y,{isShow:E.isLoading},null,8,["isShow"]),Object(l["createVNode"])(C,{page:E.page,onChangePage:f.changePage},null,8,["page","onChangePage"]),Object(l["createVNode"])(x,{ref:"modal",pdt:E.tempProduct,onUpdate:f.updateProduct},null,8,["pdt","onUpdate"]),Object(l["createVNode"])(w,{ref:"delModal",pdt:E.tempProduct,onDelProduct:f.delProduct},null,8,["pdt","onDelProduct"])])])],64)}var E=c("1985"),f=c("1799");const v={class:"modal fade",tabindex:"-1",ref:"modal"},k={class:"modal-dialog modal-xl",role:"document"},y=Object(l["createElementVNode"])("div",{class:"modal-header"},[Object(l["createElementVNode"])("p",{class:"modalTitle"},[Object(l["createElementVNode"])("span",null,"新增/編輯甜品")]),Object(l["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body"},x={class:"row"},w={class:"col-sm-4"},B=Object(l["createElementVNode"])("p",null,"主圖設定",-1),U=["src"],P={class:"mb-2"},L={class:"mb-3"},M=Object(l["createElementVNode"])("label",{for:"customFile",class:"form-label"},[Object(l["createTextVNode"])(" 或 上傳圖片 "),Object(l["createElementVNode"])("i",{class:"fas fa-spinner fa-spin"})],-1),_=Object(l["createElementVNode"])("p",null,"更多圖片(上限十張)",-1),D={class:"imgBox mb-2"},S=["onClick"],$=["alt","src"],F={key:0,class:"mb-2"},I={class:"input-group"},z={class:"input-group-append"},q={key:1,class:"mb-3"},T=Object(l["createElementVNode"])("label",{for:"customFile",class:"form-label"},[Object(l["createTextVNode"])(" 或 上傳圖片 "),Object(l["createElementVNode"])("i",{class:"fas fa-spinner fa-spin"})],-1),H={class:"col-sm-8"},J={class:"mb-3"},A=Object(l["createElementVNode"])("label",{for:"title",class:"form-label"},"標題",-1),G={class:"row gx-2"},K={class:"mb-3 col-md-3"},Q=Object(l["createElementVNode"])("label",{for:"category",class:"form-label"},"類別",-1),R={class:"mb-3 col-md-3"},W=Object(l["createElementVNode"])("label",{for:"price",class:"form-label"},"單位",-1),X={class:"mb-3 col-md-3"},Y=Object(l["createElementVNode"])("label",{for:"origin_price",class:"form-label"},"原價",-1),Z={class:"mb-3 col-md-3"},ee=Object(l["createElementVNode"])("label",{for:"price",class:"form-label"},"售價",-1),te=Object(l["createElementVNode"])("hr",null,null,-1),ce={class:"mb-3"},le=Object(l["createElementVNode"])("label",{for:"description",class:"form-label"},"產品描述",-1),ae={class:"mb-3"},oe=Object(l["createElementVNode"])("label",{for:"content",class:"form-label"},"說明內容",-1),se={class:"mb-3"},ne={class:"form-check form-switch"},re={key:0,class:"form-check-label",for:"flexSwitchCheckDefault"},ie={key:1,class:"form-check-label",for:"flexSwitchCheckDefault"},de=Object(l["createElementVNode"])("div",{class:"modal-footer"},[Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 "),Object(l["createElementVNode"])("button",{class:"btn btn-primary"}," 確認送出 ")],-1);function me(e,t,c,a,o,s){const n=Object(l["resolveComponent"])("Field"),r=Object(l["resolveComponent"])("ErrorMessage"),i=Object(l["resolveComponent"])("Form");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",v,[Object(l["createElementVNode"])("div",k,[Object(l["createVNode"])(i,{class:"modal-content border-0",onSubmit:s.submit},{default:Object(l["withCtx"])(({errors:e})=>[y,Object(l["createElementVNode"])("div",C,[Object(l["createElementVNode"])("div",x,[Object(l["createElementVNode"])("div",w,[B,Object(l["createElementVNode"])("img",{class:"img-fluid mb-2",alt:"",src:o.product.imageUrl},null,8,U),Object(l["createElementVNode"])("div",P,[Object(l["createVNode"])(n,{type:"text",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["圖片連結"]}]),id:"image",placeholder:"請輸入圖片連結",modelValue:o.product.imageUrl,"onUpdate:modelValue":t[0]||(t[0]=e=>o.product.imageUrl=e),name:"圖片連結",rules:"url"},null,8,["modelValue","class"]),Object(l["createVNode"])(r,{name:"圖片連結",class:"inputNote"})]),Object(l["createElementVNode"])("div",L,[M,Object(l["createElementVNode"])("input",{type:"file",id:"customFile",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["上傳圖片"]}]),rules:"image",name:"上傳圖片",ref:"imgUpload",onChange:t[1]||(t[1]=e=>s.imageUpload("imgUpload","customFile"))},null,34)]),_,Object(l["createElementVNode"])("div",D,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.product.imagesUrl,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:"imginner",key:t},[Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-primary deleteBtn",onClick:e=>s.deleteImgs(t)}," 刪除 ",8,S),Object(l["createElementVNode"])("img",{class:"img-fluid",alt:o.product.title+(t+1),src:e},null,8,$)]))),128))]),o.imgsError?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",F,[Object(l["createElementVNode"])("div",I,[Object(l["createVNode"])(n,{type:"text",class:"form-control",id:"images",placeholder:"請輸入圖片連結",modelValue:o.imgsInput,"onUpdate:modelValue":t[2]||(t[2]=e=>o.imgsInput=e),name:"多圖連結",rules:"url"},null,8,["modelValue"]),Object(l["createElementVNode"])("div",z,[Object(l["createElementVNode"])("button",{class:"btn btn-primary",type:"button",onClick:t[3]||(t[3]=e=>s.pushImg(o.imgsInput))}," 新增 ")])]),Object(l["createVNode"])(r,{name:"多圖連結",class:"inputNote"})])),o.imgsError?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",q,[T,Object(l["createElementVNode"])("input",{type:"file",id:"customFile2",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["上傳圖片"]}]),rules:"image",name:"上傳圖片",ref:"imgUpload2",onChange:t[4]||(t[4]=e=>s.imageUpload("imgUpload2","customFile2"))},null,34)]))]),Object(l["createElementVNode"])("div",H,[Object(l["createElementVNode"])("div",J,[A,Object(l["createVNode"])(n,{name:"標題",type:"text",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["標題"]}]),id:"title",placeholder:"請輸入標題",modelValue:o.product.title,"onUpdate:modelValue":t[5]||(t[5]=e=>o.product.title=e),rules:"required"},null,8,["class","modelValue"]),Object(l["createVNode"])(r,{name:"標題",class:"inputNote"})]),Object(l["createElementVNode"])("div",G,[Object(l["createElementVNode"])("div",K,[Q,Object(l["createVNode"])(n,{type:"text",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["類別"]}]),id:"category",placeholder:"請輸入分類",modelValue:o.product.category,"onUpdate:modelValue":t[6]||(t[6]=e=>o.product.category=e),name:"類別",rules:"required"},null,8,["modelValue","class"]),Object(l["createVNode"])(r,{name:"類別",class:"inputNote"})]),Object(l["createElementVNode"])("div",R,[W,Object(l["createVNode"])(n,{type:"text",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["單位"]}]),id:"unit",placeholder:"請輸入單位",modelValue:o.product.unit,"onUpdate:modelValue":t[7]||(t[7]=e=>o.product.unit=e),name:"單位",rules:"required"},null,8,["modelValue","class"]),Object(l["createVNode"])(r,{name:"單位",class:"inputNote"})]),Object(l["createElementVNode"])("div",X,[Y,Object(l["createVNode"])(n,{type:"number",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["原價"]}]),id:"origin_price",placeholder:"請輸入原價",modelValue:o.product.origin_price,"onUpdate:modelValue":t[8]||(t[8]=e=>o.product.origin_price=e),name:"原價",rules:"required|min_value:1"},null,8,["modelValue","class"]),Object(l["createVNode"])(r,{name:"原價",class:"inputNote"})]),Object(l["createElementVNode"])("div",Z,[ee,Object(l["createVNode"])(n,{type:"number",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["售價"]}]),id:"price",placeholder:"請輸入售價",modelValue:o.product.price,"onUpdate:modelValue":t[9]||(t[9]=e=>o.product.price=e),name:"售價",rules:"required|min_value:1"},null,8,["modelValue","class"]),Object(l["createVNode"])(r,{name:"售價",class:"inputNote"})])]),te,Object(l["createElementVNode"])("div",ce,[le,Object(l["createVNode"])(n,{as:"textarea",rows:"6",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["產品描述"]}]),id:"description",placeholder:"請輸入產品描述",modelValue:o.product.description,"onUpdate:modelValue":t[10]||(t[10]=e=>o.product.description=e),name:"產品描述",rules:"required|max:200"},null,8,["modelValue","class"]),Object(l["createVNode"])(r,{name:"產品描述",class:"inputNote"})]),Object(l["createElementVNode"])("div",ae,[oe,Object(l["createVNode"])(n,{as:"textarea",rows:"6",class:Object(l["normalizeClass"])(["form-control",{"is-invalid":e["產品說明內容"]}]),id:"content",placeholder:"請輸入產品說明內容",modelValue:o.product.content,"onUpdate:modelValue":t[11]||(t[11]=e=>o.product.content=e),name:"產品說明內容",rules:"required|max:500"},null,8,["modelValue","class"]),Object(l["createVNode"])(r,{name:"產品說明內容",class:"inputNote"})]),Object(l["createElementVNode"])("div",se,[Object(l["createElementVNode"])("div",ne,[1==c.pdt.is_enabled?(Object(l["openBlock"])(),Object(l["createElementBlock"])("label",re," 上架中 ")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("label",ie," 未上架 ")),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"true-value":1,"false-value":0,class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault","onUpdate:modelValue":t[12]||(t[12]=e=>o.product.is_enabled=e)},null,512),[[l["vModelCheckbox"],o.product.is_enabled]])])])])])]),de]),_:1},8,["onSubmit"])])],512)}var be=c("8ad7"),pe={inject:["emitter"],data(){return{product:{},imgsInput:"",imgsError:!1}},mixins:[be["a"]],props:{pdt:{type:Object,defalut(){return{}}}},methods:{submit(){const e={...this.product,origin_price:Number(this.product.origin_price),price:Number(this.product.price)};this.$emit("update",e)},imageUpload(e,t){const c=this.$refs[e].files[0],l=new FormData;l.append("file-to-upload",c);const a="https://vue3-course-api.hexschool.io/api/lili-testapi/admin/upload";this.$http.post(a,l).then(c=>{c.data.success?("imgUpload"===e?this.product.imageUrl=c.data.imageUrl:this.pushImg(c.data.imageUrl),document.getElementById(t).value=""):this.emitter.emit("pushMessage",{style:"fail",content:c.data.message,icon:""}),this.isLoading=!1}).catch(e=>{console.log(e),this.isLoading=!1})},deleteImgs(e){this.product.imagesUrl.splice(e,1)},pushImg(e){const t=[...this.product.imagesUrl];10===this.product.imagesUrl.length?this.imgsError=!0:(t.push(e),this.product.imagesUrl=t),this.imgsInput=""}},watch:{pdt(){this.product={...this.pdt},this.product.imagesUrl||(this.product.imagesUrl=[]),this.imgsError=!1,this.product.imagesUrl&&10===this.product.imagesUrl.length&&(this.imgsError=!0)}}},ue=c("6b0d"),je=c.n(ue);const Oe=je()(pe,[["render",me]]);var ge=Oe,he=c("cb98"),Ve=c("3a5e"),Ne={data(){return{productList:[],tempProduct:{},isNew:!1,page:{},currentPage:1,isLoading:!1}},inject:["emitter"],components:{Header:E["a"],Pagination:f["a"],Modal:ge,DelModal:he["a"],Loading:Ve["a"]},methods:{getProducts(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/lili-testapi/admin/products?page="+this.currentPage;this.$http.get(e).then(e=>{e.data.success?(this.productList=e.data.products,this.page=e.data.pagination,console.log(this.productList,"productList")):console.error("列表取得失敗"),this.isLoading=!1}).catch(e=>{console.log(e),this.isLoading=!1})},openModal(e,t){this.$refs.modal.showModal(),this.tempProduct={...t},this.isNew=e,console.log(this.productList,"productList")},openDelModal(e){this.$refs.delModal.showModal(),this.tempProduct={...e}},delProduct(e){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/lili-testapi/admin/product/"+e.id;this.$http.delete(t).then(e=>{e.data.success?(this.emitter.emit("pushMessage",{style:"success",content:e.data.message,icon:""}),this.getProducts()):this.emitter.emit("pushMessage",{style:"fail",content:e.data.message,icon:"fa-solid fa-triangle-exclamation"}),this.$refs.delModal.hideModal(),this.isLoading=!1}).catch(e=>{console.error(e)})},updateProduct(e){this.isLoading=!0;let t="https://vue3-course-api.hexschool.io/api/lili-testapi/admin/product/"+e.id,c="put";this.isNew&&(t="https://vue3-course-api.hexschool.io/api/lili-testapi/admin/product",c="post"),this.isLoading=!0,this.$http[c](t,{data:e}).then(e=>{this.isLoading=!1,this.$refs.modal.hideModal(),e.data.success?(this.emitter.emit("pushMessage",{style:"success",content:e.data.message,icon:""}),this.getProducts()):this.emitter.emit("pushMessage",{style:"fail",content:e.data.message,icon:"fa-solid fa-triangle-exclamation"})}).catch(e=>{this.isLoading=!1,console.error(e)}),this.isLoading=!1},changePage(e){this.currentPage=e,this.getProducts()}},mounted(){this.getProducts()}};const Ee=je()(Ne,[["render",N]]);t["default"]=Ee},cb98:function(e,t,c){"use strict";var l=c("7a23");const a={class:"modal fade",tabindex:"-1",ref:"modal"},o={class:"modal-dialog"},s={class:"modal-content"},n={class:"modal-header"},r={class:"modal-title"},i=Object(l["createTextVNode"])(" 提示 "),d=Object(l["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),m={class:"modal-body"},b={class:"modal-footer"},p=Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function u(e,t,c,u,j,O){const g=Object(l["resolveComponent"])("font-awesome-icon");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",a,[Object(l["createElementVNode"])("div",o,[Object(l["createElementVNode"])("div",s,[Object(l["createElementVNode"])("div",n,[Object(l["createElementVNode"])("h5",r,[Object(l["createVNode"])(g,{icon:"fa-solid fa-circle-exclamation"}),i]),d]),Object(l["createElementVNode"])("div",m,[Object(l["createElementVNode"])("p",null,"您確定要刪除"+Object(l["toDisplayString"])(c.pdt.title)+"嗎?",1)]),Object(l["createElementVNode"])("div",b,[p,Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=t=>e.$emit("delProduct",c.pdt))}," 確定 ")])])])],512)}var j=c("8ad7"),O={mixins:[j["a"]],props:["pdt"]},g=c("6b0d"),h=c.n(g);const V=h()(O,[["render",u]]);t["a"]=V}}]);
//# sourceMappingURL=chunk-21d30107.312cecfa.js.map