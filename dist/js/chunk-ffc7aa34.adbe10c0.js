(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffc7aa34"],{"1fba":function(e,t,i){"use strict";var a=i("3a5e");t["a"]={data(){return{cartList:[],total:0,finalTotal:0,isLoading:!1,couponCode:"",coupon:{}}},components:{Loading:a["a"]},inject:["emitter"],methods:{getCart(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/lili-testapi/cart";this.$http.get(e).then(e=>{console.log(e),e.data.success?(this.cartList=e.data.data.carts,this.total=e.data.data.total,e.data.data.carts[0].coupon&&(this.coupon=e.data.data.carts[0].coupon),this.finalTotal=e.data.data.final_total+this.fare):console.error("列表取得失敗"),this.isLoading=!1}).catch(e=>{console.error(e),this.isLoading=!1})}},mounted(){this.getCart()},computed:{fare(){return this.total<3e3?150:0},discount(){return 0!==this.total?this.total+this.fare-this.finalTotal:0},remain(){return 3e3-this.total}}}},"3a5e":function(e,t,i){"use strict";var a=i("7a23");const o=Object(a["createElementVNode"])("div",{class:"loadingio-spinner-spin-5hfsjfnfs9l"},[Object(a["createElementVNode"])("div",{class:"ldio-pxmsnoggd6n"},[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")])])],-1);function n(e,t,i,n,c,l){const s=Object(a["resolveComponent"])("VueLoading");return Object(a["openBlock"])(),Object(a["createBlock"])(s,{loader:"bars",active:c.isLoading,"onUpdate:active":t[0]||(t[0]=e=>c.isLoading=e)},{default:Object(a["withCtx"])(()=>[o]),_:1},8,["active"])}var c=i("9062"),l=i.n(c),s=(i("e40d"),{data(){return{isLoading:this.isShow}},props:["isShow"],components:{VueLoading:l.a},watch:{isShow(){this.isLoading=this.isShow}}}),r=(i("d1d1"),i("6b0d")),d=i.n(r);const u=d()(s,[["render",n]]);t["a"]=u},"46e4":function(e,t,i){},9062:function(e,t,i){!function(t,a){e.exports=a(i("7a23"))}(0,(function(e){return(()=>{"use strict";var t={553:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const i=e.__vccOpts||e;for(const[a,o]of t)i[a]=o;return i}},976:t=>{t.exports=e}},i={};function a(e){var o=i[e];if(void 0!==o)return o.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{a.r(o),a.d(o,{Component:()=>V,Plugin:()=>E,default:()=>k,useLoading:()=>w});var e=a(976);function t(t,i,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=(0,e.h)(t,i,o),c=document.createElement("div");return c.classList.add("vld-container"),a.appendChild(c),(0,e.render)(n,c),n.component}const i="undefined"!=typeof window?window.HTMLElement:Object,n=["aria-busy"],c={class:"vld-icon"},l={mounted(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn(e){if(!this.isActive)return;if(e.target===this.$refs.root||this.$refs.root.contains(e.target))return;let t=this.container?this.container:this.isFullPage?null:this.$refs.root.parentElement;(this.isFullPage||t&&t.contains(e.target))&&(e.preventDefault(),this.$refs.root.focus())}},beforeUnmount(){document.removeEventListener("focusin",this.focusIn)}},s=["width","height","stroke"],r=[(0,e.createStaticVNode)('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".25" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.8s" repeatCount="indefinite"></animateTransform></path></g></g>',1)],d=(0,e.defineComponent)({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});var u=a(553);const m=(0,u.default)(d,[["render",function(t,i,a,o,n,c){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,stroke:t.color},r,8,s)}]]),p=["fill","width","height"],h=[(0,e.createStaticVNode)('<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',3)],b=(0,e.defineComponent)({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}}),g=(0,u.default)(b,[["render",function(t,i,a,o,n,c){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:t.color,width:t.width,height:t.height},h,8,p)}]]),f=["height","width","fill"],v=[(0,e.createStaticVNode)('<rect x="0" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="10" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="20" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect>',3)],y=(0,e.defineComponent)({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}}),j={Spinner:m,Dots:g,Bars:(0,u.default)(y,[["render",function(t,i,a,o,n,c){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:t.height,width:t.width,fill:t.color},v,8,f)}]])},O=(0,e.defineComponent)({name:"vue-loading",mixins:[l],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,i],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},emits:["hide","update:active"],data(){return{isActive:this.active}},components:j,mounted(){document.addEventListener("keyup",this.keyPress)},methods:{cancel(){this.canCancel&&this.isActive&&(this.hide(),this.onCancel.apply(null,arguments))},hide(){this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(()=>{const t=this.$refs.root.parentElement;var i,a;(0,e.render)(null,t),void 0!==(i=t).remove?i.remove():null===(a=i.parentNode)||void 0===a||a.removeChild(i)},150))},disableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.add("vld-shown")},enableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.remove("vld-shown")},keyPress(e){27===e.keyCode&&this.cancel()}},watch:{active(e){this.isActive=e},isActive(e){e?this.disableScroll():this.enableScroll()}},computed:{bgStyle(){return{background:this.backgroundColor,opacity:this.opacity,backdropFilter:"blur(".concat(this.blur,")")}}},beforeUnmount(){document.removeEventListener("keyup",this.keyPress)}}),N=(0,u.default)(O,[["render",function(t,i,a,o,l,s){return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{ref:"root",name:t.transition},{default:(0,e.withCtx)(()=>[(0,e.withDirectives)((0,e.createElementVNode)("div",{tabindex:"0",class:(0,e.normalizeClass)(["vld-overlay is-active",{"is-full-page":t.isFullPage}]),"aria-busy":t.isActive,"aria-label":"Loading",style:(0,e.normalizeStyle)({zIndex:t.zIndex})},[(0,e.createElementVNode)("div",{class:"vld-background",onClick:i[0]||(i[0]=(0,e.withModifiers)((function(){return t.cancel&&t.cancel(...arguments)}),["prevent"])),style:(0,e.normalizeStyle)(t.bgStyle)},null,4),(0,e.createElementVNode)("div",c,[(0,e.renderSlot)(t.$slots,"before"),(0,e.renderSlot)(t.$slots,"default",{},()=>[((0,e.openBlock)(),(0,e.createBlock)((0,e.resolveDynamicComponent)(t.loader),{color:t.color,width:t.width,height:t.height},null,8,["color","width","height"]))]),(0,e.renderSlot)(t.$slots,"after")])],14,n),[[e.vShow,t.isActive]])]),_:3},8,["name"])}]]),V=N;function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{show(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;const n=Object.assign({},e,a,{programmatic:!0,lockScroll:!0,isFullPage:!1,active:!0});let c=n.container;n.container||(c=document.body,n.isFullPage=!0);const l=Object.assign({},i,o);return{hide:t(V,n,c,l).ctx.hide}}}}const E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=w(t,i);e.config.globalProperties.$loading=a,e.provide("$loading",a)};V.install=E;const k=V})(),o})()}))},b1ec:function(e,t,i){"use strict";i.r(t);var a=i("7a23");const o={class:"pageInner cartPage"},n={class:"container"},c={class:"cartListBox"},l=Object(a["createElementVNode"])("div",{class:"titleBox"},[Object(a["createElementVNode"])("span",{class:"titleEn"},"Cart"),Object(a["createElementVNode"])("h2",{class:"title wow fadeInUp","data-wow-delay":"250ms"},[Object(a["createElementVNode"])("span",null,"購"),Object(a["createTextVNode"])("物清單 ")])],-1),s={class:"btnBox mt-2"},r=Object(a["createStaticVNode"])('<div class="cartListTitle"><p style="width:20%;">圖片</p><p style="width:30%;">品名</p><p style="width:14%;">單價</p><p style="width:14%;">數量</p><p style="width:14%;">小計</p><p style="width:8%;">刪除</p></div>',1),d={class:"cartList"},u={class:"imgBox"},m=["title","onClick"],p=["src","alt"],h=["title","onClick"],b={class:"pdtPrice"},g={class:"btnBox"},f=["onClick"],v=["onUpdate:modelValue","onChange"],y=["onClick"],j={class:"pdtTotal"},O=["onClick"],N={class:"cartTotalBox"},V={class:"cartTotalInner"},w={class:"btnBox"},E={key:0,class:"note-ok"},k={key:1,class:"note"},C=Object(a["createTextVNode"])(" 尚未套用優惠券 "),x={class:"cartTotalItem mt-2"},L=Object(a["createElementVNode"])("p",{class:"title"},"總價",-1),S={key:2,class:"cartTotalItem mt-2 red"},B=Object(a["createElementVNode"])("p",{class:"title"},"折扣",-1),M={class:"cartTotalItem mt-2"},T=Object(a["createElementVNode"])("p",{class:"title"},"運費",-1),$={key:3,class:"note-fail"},P=Object(a["createElementVNode"])("hr",null,null,-1),D={class:"cartTotalItem"},I=Object(a["createElementVNode"])("p",{class:"title"},"結算",-1),F={class:"btnBox nextStep"};function A(e,t,i,A,_,U){const q=Object(a["resolveComponent"])("font-awesome-icon"),z=Object(a["resolveComponent"])("Loading");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("div",c,[l,Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary",onClick:t[0]||(t[0]=(...e)=>U.deleteAll&&U.deleteAll(...e))}," 清除全部 ")]),r,Object(a["createElementVNode"])("div",d,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.cartList,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"cartItem",key:t},[Object(a["createElementVNode"])("figure",u,[Object(a["createElementVNode"])("a",{href:"#",title:e.title,onClick:Object(a["withModifiers"])(t=>U.productDatil(e.product.id),["prevent"])},[Object(a["createElementVNode"])("img",{src:e.product.imageUrl,alt:e.product.title,class:"img-fluid"},null,8,p)],8,m)]),Object(a["createElementVNode"])("a",{href:"#",title:e.title,onClick:Object(a["withModifiers"])(t=>U.productDatil(e.product.id),["prevent"]),class:"pdtName"},[Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.product.title),1)],8,h),Object(a["createElementVNode"])("p",b,"$ "+Object(a["toDisplayString"])(e.product.price),1),Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary mr-2 border-end-0",onClick:Object(a["withModifiers"])(t=>U.numPlus(e,e.qty-1),["prevent"])},[Object(a["createVNode"])(q,{icon:"fa-solid fa-minus"})],8,f),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"numInput",min:"1","onUpdate:modelValue":t=>e.qty=t,onChange:t=>U.numPlus(e,e.qty)},null,40,v),[[a["vModelText"],e.qty]]),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary mr-2 border-start-0",onClick:Object(a["withModifiers"])(t=>U.numPlus(e,e.qty+1),["prevent"])},[Object(a["createVNode"])(q,{icon:"fa-solid fa-plus"})],8,y)]),Object(a["createElementVNode"])("p",j,"$ "+Object(a["toDisplayString"])(e.total),1),Object(a["createElementVNode"])("a",{href:"#",title:"刪除",class:"pdtDelete",onClick:Object(a["withModifiers"])(t=>U.deleteCart(e),["prevent"])},[Object(a["createVNode"])(q,{icon:"fa-solid fa-trash-can"})],8,O)]))),128))])]),Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("div",V,[Object(a["createElementVNode"])("div",w,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"couponInput",placeholder:"請輸入優惠代碼","onUpdate:modelValue":t[1]||(t[1]=t=>e.couponCode=t)},null,512),[[a["vModelText"],e.couponCode]]),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary mr-2 border-start-0 couponBtn",onClick:t[2]||(t[2]=(...e)=>U.usecoupon&&U.usecoupon(...e))}," 套用 ")]),e.coupon&&0!==Object.keys(e.coupon).length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("small",E,[Object(a["createVNode"])(q,{icon:"fa-solid fa-circle-check"}),Object(a["createTextVNode"])(' 已套用優惠券"'+Object(a["toDisplayString"])(e.coupon.code)+'"；折扣'+Object(a["toDisplayString"])(100-e.coupon.percent)+"% ",1)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("small",k,[Object(a["createVNode"])(q,{icon:"fa-solid fa-circle-xmark"}),C])),Object(a["createElementVNode"])("div",x,[L,Object(a["createElementVNode"])("p",null,"$ "+Object(a["toDisplayString"])(e.total),1)]),e.coupon&&0!==Object.keys(e.coupon).length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",S,[B,Object(a["createElementVNode"])("p",null,"- $ "+Object(a["toDisplayString"])(e.discount),1)])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",M,[T,Object(a["createElementVNode"])("p",null,"$ "+Object(a["toDisplayString"])(e.fare),1)]),this.total<3e3?(Object(a["openBlock"])(),Object(a["createElementBlock"])("small",$,[Object(a["createVNode"])(q,{icon:"fa-solid fa-circle-exclamation"}),Object(a["createTextVNode"])(" 還差 "+Object(a["toDisplayString"])(e.remain)+"元 即可免運費 ",1)])):Object(a["createCommentVNode"])("",!0),P,Object(a["createElementVNode"])("div",D,[I,Object(a["createElementVNode"])("p",null,"$ "+Object(a["toDisplayString"])(e.finalTotal),1)]),Object(a["createElementVNode"])("div",F,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary mr-2",onClick:t[3]||(t[3]=t=>e.$router.push("/menu"))}," 繼續看 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-primary mr-2",onClick:t[4]||(t[4]=(...e)=>U.nextStep&&U.nextStep(...e))}," 下一步 ")])])])])]),Object(a["createVNode"])(z,{isShow:e.isLoading},null,8,["isShow"])],64)}var _=i("1fba"),U={mixins:[_["a"]],methods:{numPlus(e,t){this.cartList.forEach((i,a)=>{i.id===e.id&&(this.cartList[a]={...i,qty:t},this.updateCart(this.cartList[a]))})},updateCart(e){this.isLoading=!0;const t=""+e.id,i="https://vue3-course-api.hexschool.io/api/lili-testapi/cart/"+t;this.$http.put(i,{data:e}).then(e=>{e.data.success?(this.isLoading=!1,this.emitter.emit("pushMessage",{style:"success",content:e.data.message,icon:""}),this.getCart()):(this.isLoading=!1,this.emitter.emit("pushMessage",{style:"fail",content:e.data.message,icon:"fa-solid fa-triangle-exclamation"}))}).catch(e=>{console.log(e),this.isLoading=!1})},deleteCart(e){this.isLoading=!0;const t=""+e.id,i="https://vue3-course-api.hexschool.io/api/lili-testapi/cart/"+t;this.$http.delete(i).then(e=>{e.data.success?(this.emitter.emit("pushMessage",{style:"success",content:e.data.message,icon:""}),this.getCart()):this.emitter.emit("pushMessage",{style:"fail",content:e.data.message,icon:"fa-solid fa-triangle-exclamation"}),this.isLoading=!1}).catch(e=>{console.log(e),this.isLoading=!1})},deleteAll(){this.isLoading=!0,this.finalTotal=0,this.coupon={};const e="https://vue3-course-api.hexschool.io/api/lili-testapi/carts";this.$http.delete(e).then(e=>{console.log(e.data),e.data.success?(this.cartList=[],this.emitter.emit("pushMessage",{style:"success",content:e.data.message,icon:""}),this.getCart()):this.emitter.emit("pushMessage",{style:"fail",content:e.data.message,icon:"fa-solid fa-triangle-exclamation"}),this.isLoading=!1}).catch(e=>{console.error(e),this.isLoading=!1})},usecoupon(){if(0===this.cartList.length)this.emitter.emit("pushMessage",{style:"fail",content:"請添加購物車後再操作",icon:"fa-solid fa-cart-arrow-down"});else{this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/lili-testapi/coupon";this.$http.post(e,{data:{code:this.couponCode}}).then(e=>{console.log(e),e.data.success?(this.finalTotal=e.data.data.final_total,this.emitter.emit("pushMessage",{style:"success",content:e.data.message,icon:""}),this.getCart()):this.emitter.emit("pushMessage",{style:"fail",content:e.data.message,icon:"fa-solid fa-triangle-exclamation"}),this.isLoading=!1}).catch(e=>{console.log(e),this.isLoading=!1})}this.couponCode=""},nextStep(){0!==this.cartList.length?this.$router.push("/cart-check"):this.emitter.emit("pushMessage",{style:"fail",content:"請添加購物車後再操作",icon:"fa-solid fa-cart-arrow-down"})},productDatil(e){this.$router.push("/product/"+e)}},mounted(){this.$emit("unit","cart")}},q=i("6b0d"),z=i.n(q);const X=z()(U,[["render",A]]);t["default"]=X},d1d1:function(e,t,i){"use strict";i("46e4")},e40d:function(e,t,i){}}]);
//# sourceMappingURL=chunk-ffc7aa34.adbe10c0.js.map