{"version":3,"sources":["webpack:///./src/views/adminViews/Order.vue","webpack:///./src/components/adminComponents/OrderModal.vue","webpack:///./src/components/adminComponents/OrderModal.vue?9fe8","webpack:///./src/views/adminViews/Order.vue?bd90"],"names":["class","_createElementVNode","width","_createVNode","_component_Header","type","onClick","$options","_hoisted_6","_createElementBlock","_Fragment","_renderList","$data","item","index","key","_toDisplayString","_ctx","getDate","create_at","id","user","name","is_paid","_hoisted_7","paid_date","_hoisted_8","message","data-bs-toggle","data-bs-target","_hoisted_10","_hoisted_11","_component_OrderModal","ref","data","onUpdata","_component_Loading","isShow","_component_DelModal","pdt","isAll","onDelProduct","onDelAll","tabindex","role","data-bs-dismiss","aria-label","for","colspan","_component_Form","onSubmit","errors","$props","_hoisted_5","_component_font_awesome_icon","icon","_component_Field","$event","rules","_component_ErrorMessage","email","tel","_hoisted_19","address","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_30","product","title","currency","origin_price","price","qty","onChange","total","_hoisted_32","final_total","href","_hoisted_34","code","percent","_hoisted_38","_hoisted_40","_hoisted_42","_hoisted_44","_hoisted_45","order","coupon","products","origin_total","fare","finalTotal","discount","mixins","modal","props","Object","defalut","watch","this","values","forEach","i","count","methods","updataItem","deleteItem","splice","$emit","isPhone","value","phoneNumber","test","__exports__","orderList","isLoading","orderDetail","components","Header","OrderModal","Loading","DelModal","inject","openDetail","JSON","parse","stringify","$refs","detail","showModal","openDelModal","delModal","delProduct","deleteAll","api","$http","delete","then","res","success","hideModal","getOrder","emitter","emit","style","content","catch","err","console","error","get","orders","updataOrder","put","mounted","render"],"mappings":"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","file":"js/chunk-2d216802.52fb1d45.js","sourcesContent":["<template>\n  <Header></Header>\n  <div class=\"container\">\n    <div class=\"adminInner\">\n      <div class=\"btnBox\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary mr-2 border-start-0\"\n          @click=\"openDelModal(true)\"\n        >\n          刪除所有訂單\n        </button>\n      </div>\n      <div class=\"pdtList\">\n        <table class=\"mt-4\">\n          <thead>\n            <tr>\n              <th width=\"120\">訂單日期</th>\n              <th width=\"360\">訂單編號</th>\n              <th width=\"120\">訂購人</th>\n              <th width=\"120\">付款日期</th>\n              <th>備註</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) in orderList\" :key=\"index\">\n              <td>{{ $filter.getDate(item.create_at * 1000) }}</td>\n              <td>\n                {{ item.id }}\n              </td>\n              <td>{{ item.user.name }}</td>\n              <td v-if=\"item.is_paid\">\n                {{ item.paid_date }}\n              </td>\n              <td v-else>\n                尚未付款\n              </td>\n              <td>\n                {{ item.message }}\n              </td>\n              <td>\n                <div class=\"btn-group\">\n                  <button\n                    class=\"btn btn-outline-primary btn-sm\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#Modal\"\n                    @click.prevent=\"openDetail(item)\"\n                  >\n                    編輯\n                  </button>\n                  <button\n                    class=\"btn btn-outline-danger btn-sm\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#delModal\"\n                    @click=\"openDelModal(false, item)\"\n                  >\n                    刪除\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <!-- <Pagination></Pagination> -->\n      <OrderModal\n        ref=\"detail\"\n        :data=\"orderDetail\"\n        @updata=\"updataOrder\"\n      ></OrderModal>\n      <Loading :isShow=\"isLoading\"></Loading>\n      <DelModal\n        ref=\"delModal\"\n        :pdt=\"orderDetail\"\n        :isAll = \"isAll\"\n        @del-product=\"delProduct\"\n        @delAll=\"deleteAll\"\n      ></DelModal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from '@/components/adminComponents/Header.vue';\n// import Pagination from '@/components/Pagination.vue';\nimport OrderModal from '@/components/adminComponents/OrderModal.vue';\nimport Loading from '@/components/Loading.vue';\nimport DelModal from '@/components/adminComponents/DelModal.vue';\n\nexport default {\n  data() {\n    return {\n      orderList: [],\n      isLoading: false,\n      orderDetail: {},\n      isAll: false,\n    };\n  },\n  components: {\n    Header,\n    // Pagination,\n    OrderModal,\n    Loading,\n    DelModal,\n  },\n  inject: ['emitter'],\n  methods: {\n    openDetail(item) {\n      this.orderDetail = JSON.parse(JSON.stringify(item));\n      this.$refs.detail.showModal();\n    },\n    openDelModal(isAll, item) {\n      this.isAll = isAll;\n      if (!isAll) {\n        this.orderDetail = item;\n      }\n      this.$refs.delModal.showModal();\n    },\n    delProduct(item) {\n      if (item === 'allOrder') {\n        this.deleteAll();\n      } else {\n        this.isLoading = true;\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`;\n        this.$http\n          .delete(api)\n          .then((res) => {\n            if (res.data.success) {\n              this.$refs.delModal.hideModal();\n              this.getOrder();\n              this.isLoading = false;\n              this.emitter.emit('pushMessage', {\n                style: 'success',\n                content: res.data.message,\n                icon: 'fa-solid fa-circle-check',\n              });\n            } else {\n              this.emitter.emit('pushMessage', {\n                style: 'fail',\n                content: res.data.message,\n                icon: 'fa-solid fa-triangle-exclamation',\n              });\n              this.$refs.delModal.hideModal();\n              this.isLoading = false;\n            }\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      }\n    },\n    getOrder() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.orderList = res.data.orders;\n            this.isLoading = false;\n          } else {\n            console.error('列表取得失敗');\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n    updataOrder(item) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`;\n      this.$http\n        .put(api, { data: item })\n        .then((res) => {\n          if (res.data.success) {\n            this.emitter.emit('pushMessage', {\n              style: 'success',\n              content: res.data.message,\n              icon: 'fa-solid fa-circle-check',\n            });\n            this.$refs.detail.hideModal();\n            this.getOrder();\n            this.isLoading = false;\n          } else {\n            this.emitter.emit('pushMessage', {\n              style: 'fail',\n              content: res.data.message,\n              icon: 'fa-solid fa-triangle-exclamation',\n            });\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n    deleteAll() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders/all`;\n      this.$http\n        .delete(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.$refs.delModal.hideModal();\n            this.getOrder();\n            this.isLoading = false;\n            this.emitter.emit('pushMessage', {\n              style: 'success',\n              content: res.data.message,\n              icon: 'fa-solid fa-circle-check',\n            });\n          } else {\n            this.emitter.emit('pushMessage', {\n              style: 'fail',\n              content: res.data.message,\n              icon: 'fa-solid fa-triangle-exclamation',\n            });\n            this.$refs.delModal.hideModal();\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n  },\n  mounted() {\n    this.getOrder();\n  },\n};\n</script>\n","<template>\n  <!-- Modal -->\n  <div class=\"modal fade orderModal\" tabindex=\"-1\" ref=\"modal\">\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <Form\n        class=\"modal-content border-0\"\n        v-slot=\"{\n          errors,\n        }\"\n        @submit=\"onSubmit\"\n      >\n        <div class=\"modal-header\">\n          <p class=\"modalTitle\">\n            <span>訂單編號: {{ data.id }}</span>\n          </p>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\" v-if=\"data.user\">\n          <div class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"mb-3\">\n                <label for=\"name\" class=\"form-label inputTitle\">\n                  <font-awesome-icon icon=\"fa-solid fa-stroopwafel\" />\n                  訂購人姓名\n                </label>\n                <Field\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"name\"\n                  v-model=\"order.user.name\"\n                  rules=\"required\"\n                  name=\"訂購人姓名\"\n                  :class=\"{ 'is-invalid': errors['訂購人姓名'] }\"\n                ></Field>\n                <ErrorMessage\n                  name=\"訂購人姓名\"\n                  class=\"inputNote\"\n                ></ErrorMessage>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"email\" class=\"form-label inputTitle\">\n                  <font-awesome-icon icon=\"fa-solid fa-stroopwafel\" />\n                  聯絡電子信箱\n                </label>\n                <Field\n                  type=\"email\"\n                  class=\"form-control\"\n                  id=\"email\"\n                  v-model=\"order.user.email\"\n                  rules=\"required|email\"\n                  name=\"聯絡電子信箱\"\n                  :class=\"{ 'is-invalid': errors['聯絡電子信箱'] }\"\n                ></Field>\n                <ErrorMessage\n                  name=\"聯絡電子信箱\"\n                  class=\"inputNote\"\n                ></ErrorMessage>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"tel\" class=\"form-label inputTitle\">\n                  <font-awesome-icon icon=\"fa-solid fa-stroopwafel\" />\n                  手機號碼\n                </label>\n                <Field\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"tel\"\n                  v-model=\"order.user.tel\"\n                  name=\"手機號碼\"\n                  :class=\"{ 'is-invalid': errors['手機號碼'] }\"\n                  :rules=\"isPhone\"\n                ></Field>\n                <ErrorMessage name=\"手機號碼\" class=\"inputNote\"></ErrorMessage>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"add\" class=\"form-label\">\n                  收件地址\n                  <span class=\"tag\">必填</span>\n                </label>\n                <Field\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"add\"\n                  name=\"收件地址\"\n                  :class=\"{ 'is-invalid': errors['收件地址'] }\"\n                  v-model=\"order.user.address\"\n                  rules=\"required\"\n                ></Field>\n                <ErrorMessage name=\"收件地址\" class=\"inputNote\"></ErrorMessage>\n              </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"orderDetailList mb-1\">\n                <table class=\"w-100\">\n                  <thead>\n                    <tr class=\"orderTitle\">\n                      <td>名稱</td>\n                      <td width=\"80\">原價</td>\n                      <td width=\"80\">售價</td>\n                      <td width=\"60\">數量</td>\n                      <td width=\"80\">小計</td>\n                      <td width=\"80\" v-if=\"coupon\">折扣後</td>\n                      <td width=\"80\">刪除</td>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"(item, index) in products\" :key=\"index\">\n                      <td>{{ item.product.title }}</td>\n                      <td>{{ $filter.currency(item.product.origin_price) }}</td>\n                      <td>{{ $filter.currency(item.product.price) }}</td>\n                      <td>\n                        <input\n                          type=\"number\"\n                          v-model=\"item.qty\"\n                          @change=\"updataItem(item)\"\n                        />\n                      </td>\n                      <td>\n                        {{ $filter.currency(item.total) }}\n                      </td>\n                      <td v-if=\"coupon\">\n                        {{ $filter.currency(item.final_total) }}\n                      </td>\n                      <td>\n                        <a\n                          href=\"#\"\n                          title=\"刪除\"\n                          class=\"d-block\"\n                          @click.prevent=\"deleteItem(item)\"\n                        >\n                          <font-awesome-icon icon=\"fa-solid fa-trash-can\" />\n                        </a>\n                      </td>\n                    </tr>\n                    <tr v-if=\"coupon\">\n                      <td colspan=\"7\" class=\"text-left\">\n                        <font-awesome-icon icon=\"fa-solid fa-circle-check\" />\n                        已套用{{ coupon.title }}優惠券\"{{\n                          coupon.code\n                        }}\"；折扣{{ 100 - coupon.percent }}%\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div class=\"orderTotal\">\n                <div class=\"orderItem\">\n                  <p class=\"title\">總價</p>\n                  <p>$ {{ $filter.currency(origin_total) }}</p>\n                </div>\n                <div class=\"orderItem red\" v-if=\"coupon\">\n                  <p class=\"title\">折扣</p>\n                  <p>– $ {{ $filter.currency(discount) }}</p>\n                </div>\n                <div class=\"orderItem\">\n                  <p class=\"title\">運費</p>\n                  <p>$ {{ fare }}</p>\n                </div>\n                <div class=\"orderItem\">\n                  <p class=\"title\">結算</p>\n                  <p>$ {{ $filter.currency(finalTotal) }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-primary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button class=\"btn btn-primary\">\n            確定\n          </button>\n        </div>\n      </Form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modal from '@/mixins/bsmodal';\n\nexport default {\n  data() {\n    return {\n      order: {},\n      coupon: {},\n      products: [],\n      origin_total: 0,\n      fare: 0,\n      finalTotal: 0,\n      discount: 0,\n    };\n  },\n  mixins: [modal],\n  props: {\n    data: {\n      type: Object,\n      defalut() {\n        return {};\n      },\n    },\n  },\n  watch: {\n    data() {\n      this.origin_total = 0;\n      this.order = this.data;\n      this.products = Object.values(this.data.products);\n      Object.values(this.order.products).forEach((i) => {\n        this.coupon = i.coupon;\n      });\n      this.count();\n    },\n  },\n  methods: {\n    updataItem(item) {\n      this.products.forEach((i, index) => {\n        if (i.id === item.id) {\n          this.products[index].total = item.qty * item.product.price;\n          if (this.coupon) {\n            this.products[index].final_total = this.products[index].total\n            * (item.coupon.percent / 100);\n          }\n        }\n      });\n      this.count();\n    },\n    deleteItem(item) {\n      this.products.forEach((i, index) => {\n        if (i.id === item.id) {\n          this.products.splice(index, 1);\n          this.order.products = this.products;\n        }\n      });\n      this.count();\n    },\n    count() {\n      this.origin_total = 0;\n      this.finalTotal = 0;\n      this.products.forEach((i) => {\n        this.origin_total += i.total;\n      });\n      this.fare = this.origin_total > 3000 ? 0 : 150;\n      if (!this.coupon) {\n        this.finalTotal = this.origin_total + this.fare;\n      } else {\n        this.products.forEach((i) => {\n          this.finalTotal += i.final_total;\n        });\n        this.finalTotal += this.fare;\n        this.discount = this.origin_total + this.fare - this.finalTotal;\n      }\n    },\n    onSubmit() {\n      this.$emit('updata', this.order);\n    },\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : '請輸入正確的手機號碼';\n    },\n  },\n};\n</script>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=f77e6706\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\homework\\\\sweet\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Order.vue?vue&type=template&id=2f4a422c\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\homework\\\\sweet\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}